# react-sketch-ruler

> In using react, the zoom operation used for page presentation

[![](https://camo.githubusercontent.com/28479a7a834310a667f36760a27283f7389e864a/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f6c2f76322d646174657069636b65722e737667)](https://camo.githubusercontent.com/28479a7a834310a667f36760a27283f7389e864a/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f6c2f76322d646174657069636b65722e737667) [![build status](https://github.com/kakajun/react-sketch-ruler/actions/workflows/gh-pages.yml/badge.svg?branch=main)](https://github.com/kakajun/react-sketch-ruler/actions/workflows/gh-pages.yml)

<div align=center>
<img src="https://github.com/kakajun/react-sketch-ruler/blob/main/example/assets/logo.png" width="392" height="300">
</div>

## ğŸš€ Features

- ğŸ’¡ ä»¥é¼ æ ‡ä¸ºä¸­å¿ƒç¼©æ”¾é¡µé¢, å¯ä»¥ä½¿ç”¨pazoomçš„ç‰¹æ€§
- ğŸ“¦ å‡åŒ–é…ç½®
- ğŸ’ æä¾›è¿˜åŸ, æ”¾å¤§, ç¼©å°çš„åŠŸèƒ½
- ğŸ“¦ å¹³å°ä¸ä¸šåŠ¡ä»£ç é€šè¿‡æ’æ§½çš„æ–¹å¼è¿›è¡Œåˆ†ç¦», ä¹Ÿå°±æ˜¯ä½ åªéœ€è¦ä¸“æ³¨ä½ çš„ä¸šåŠ¡ä»£ç , å…¶ä»–äº¤ç»™å¹³å°

## ğŸ”‘ è¯´æ˜

---

æ’ä»¶åº”ç”¨èŒƒå›´: é€‚åˆä½œä¸ºä½ä»£ç å¹³å°æ“ä½œé¡µé¢ç¼©æ”¾å·¥å…·,æ¯”å¦‚åšå›¾å·¥å…·å¦‚, å¤§å±å¯è§†åŒ–, åšå›¾å·¥å…·å›¾æ€ªå…½ç­‰,ç±»ä¼¼psçš„ç¼©æ”¾æ•ˆæœ.

## ğŸŒˆ åº”ç”¨æ¡ˆä¾‹:

[GoView é«˜æ•ˆæ‹–æ‹½å¼ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°](https://vue.mtruning.club/#/project/items)

[GoView 2X åº”ç”¨æºç åœ°å€](https://gitee.com/majun2232/go-view)

## ğŸ¦„ demo

æ¡ˆä¾‹æµè§ˆ: [https://kakajun.github.io/react-sketch-ruler](https://kakajun.github.io/react-sketch-ruler) ![image](https://github.com/kakajun/react-sketch-ruler/blob/main/example/assets/1.png)

## å®‰è£…

> æ”¯æŒå…¨å±€å¯¼å…¥å’Œæ¨¡å—å¯¼å…¥

```js
npm install --save react-sketch-ruler

yarn add react-sketch-ruler  -S
```

## å¼•å…¥æ–¹å¼

å°†æ‰“åŒ…åçš„diståŒ…æ‹·è´ï¼Œç”¨importå¯¼å…¥ï¼Œæ”¯æŒä¸‹é¢ä¸¤ç§å¼•ç”¨æ–¹å¼

```
import SketchRule from 'react-sketch-ruler'
import 'react-sketch-ruler/lib/style.css'

```

## æ”¯æŒçš„åŠŸèƒ½

- [x] æ ‡å°ºæ¸²æŸ“
- [x] ç¼©æ”¾å†…å®¹ï¼Œé‡ç»˜æ ‡å°º
- [x] æŒ‰Ctrl+é¼ æ ‡æ»šè½®ç¼©æ”¾, æ ¹æ®é¼ æ ‡ä½ç½®å‘ç”Ÿå˜åŒ–
- [x] æŒ‰ç©ºæ ¼æ‹–åŠ¨ç”»å¸ƒ
- [x] åˆ‡æ¢æ ‡å°ºçŠ¶æ€ï¼Œæ˜¾ç¤ºæˆ–éšè—
- [x] å‚è€ƒçº¿ç®¡ç†ï¼ˆå¢åŠ åˆ é™¤ï¼‰
- [x] æ”¯æŒå‚è€ƒçº¿ä»»æ„åœ°æ–¹æ‹–æ‹½
- [x] å·¦ä¸Šè§’çš„çœ¼ç›ï¼Œç‚¹å‡»èƒ½æ§åˆ¶çº¢çº¿æ˜¾å½±
- [x] åˆå§‹åŒ–è‡ªåŠ¨å±…ä¸­
- [x] æä¾›å³ä¸‹è§’æŒ‰é’®ç¼©æ”¾,è¿˜åŸæ‰€éœ€API
- [x] åˆ»åº¦å¸é™„æ•ˆæœ
- [x] é€‰ä¸­é˜´å½±é˜´å½±å“åº”
- [x] é˜´å½±åˆ»åº¦æ•°å­—å“åº”

## æœªæ¥æ”¯æŒåŠŸèƒ½

- [] åŠ å…¥å•å…ƒæµ‹è¯•åŠŸèƒ½

å‚è€ƒä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œ[ç‚¹å‡»è¿™é‡Œ](https://github.com/kakajun/react-sketch-ruler/blob/main/example/UserRulerts.tsx)

## api

### å±æ€§

| å±æ€§åç§° | æè¿° | ç±»å‹ | é»˜è®¤å€¼ |
| --- | --- | --- | --- |
| scale | åˆå§‹åŒ–æ ‡å°ºçš„ç¼©æ”¾åŠç”»å¸ƒ | Number | 1 |
| rate | åˆå§‹åŒ–æ ‡å°ºçš„ç¼©æ”¾ | Number | 1 |
| thick | æ ‡å°ºçš„åšåº¦ | Number | 16 |
| width | æ”¾ç½®æ ‡å°ºçª—å£çš„å®½åº¦ | Number | 1400 |
| height | æ”¾ç½®æ ‡å°ºçª—å£çš„é«˜åº¦ | Number | 900 |
| paddingRatio | ç”»å¸ƒä¸å¤–æ¡†é—´éš” | Number | 20% (åŸºäºå¤–æ¡†å®½é«˜æœ€å°é•¿åº¦) |
| autoCenter | è‡ªåŠ¨å±…ä¸­å¯¹é½ | Boolean | true (è®¾ä¸ºfalse,é‚£ä¹ˆéœ€è¦åœ¨panzoomOptionä¸­ä¼ å…¥startX,startY) |
| eyeIcon | ççœ¼å›¾æ ‡ | String | - |
| closeEyeIcon | é—­çœ¼å›¾æ ‡ | String | - |
| canvasWidth | ç”»å¸ƒå®½ | Number | 1000 |
| canvasHeight | ç”»å¸ƒé«˜ | Number | 700 |
| isShowReferLine | æ˜¯å¦æ˜¾ç¤ºæ ‡çº¿ | Boolean | true |
| showRuler | æ˜¯å¦æ˜¾ç¤ºå°ºè§„ | Boolean | true |
| showShadowText | æ˜¯å¦æ˜¾ç¤ºé˜´å½±æ–‡å­— | Boolean | true |
| lines | åˆå§‹åŒ–æ°´å¹³æ ‡å°ºä¸Šçš„å‚è€ƒçº¿ | object<Array> | {h:[],v:[]} |
| snapsObj | å¸é™„åˆ»åº¦é›†åˆ | object<Array> | {h:[],v:[]} |
| snapThreshold | å¸é™„è·ç¦» | Number | 5 |
| shadow | é˜´å½±é…ç½® | object<Number> | {x: 0,y: 0, width: 0, height: 0} |
| gridRatio | åˆ»åº¦åˆ†æ•£æ¯”ä¾‹ | Number | 1 |
| selfHandle | è‡ªå·±å¤„ç†ç›‘å¬ç§»åŠ¨å’Œç¼©æ”¾ | Boolean | false |
| panzoomOption | panzoomç›¸å…³çš„æ‰©å±•å‚æ•° | object | - |
| palette | æ ‡å°ºçš„æ ·å¼é…ç½®å‚æ•° | Object | å¦‚ä¸‹è¡¨ |

| å±æ€§åç§°        | æè¿°             | é»˜è®¤å€¼                         |
| --------------- | ---------------- | ------------------------------ |
| bgColor         | ç”»å¸ƒèƒŒæ™¯         | #f6f7f9                        |
| longfgColor     | åˆ»åº¦èƒŒæ™¯         | #BABBBC                        |
| fontColor       | åˆ»åº¦å­—ä½“é¢œè‰²     | #7D8694                        |
| fontShadowColor | åˆ»åº¦é˜´å½±å­—ä½“é¢œè‰² | #106ebe                        |
| shadowColor     | æ¿€æ´»é˜´å½±èƒŒæ™¯     | #E8E8E8                        |
| lineColor       | å¯¹å‡†çº¿é¢œè‰²       | #51d6a9                        |
| lineType        | å¯¹å‡†çº¿ç±»å‹       | solid (solid \dashed \ dotted) |
| lockLineColor   | é”å®šå¯¹å‡†çº¿é¢œè‰²   | #d4d7dc                        |
| hoverColor      | æ ‡ç­¾é¢œè‰²å­—ä½“     | #fff                           |
| hoverBg         | æ ‡ç­¾é¢œè‰²èƒŒæ™¯     | #000                           |
| borderColor     | å°ºå­å¤–è¾¹æ¡†é¢œè‰²   | #eeeeef                        |

> æ›´å¤špazoomæ’ä»¶çš„é…ç½®çš„panzoomOptionå‚æ•°ï¼Œå¯ä»¥å‚è€ƒ[pazoom document](https://github.com/timmywil/panzoom)

### Event

| äº‹ä»¶åç§° | æè¿° | å›è°ƒå‚æ•° |
| --- | --- | --- |
| handleCornerClick | å·¦ä¸Šè§’ç‚¹å‡»äº‹ä»¶ |  |
| zoomchange | ç”»å¸ƒç§»åŠ¨,ç¼©æ”¾äº‹ä»¶ | {dimsOut:{elem: {}, parent: {}},originalEvent:{},scale,x,y} |

### ä½¿ç”¨è¯´æ˜

1. åŒæ—¶æŒ‰Ctrl+é¼ æ ‡æ»šè½®ç¼©æ”¾, æ ¹æ®é¼ æ ‡ä½ç½®å‘ç”Ÿé¡µé¢ç¼©æ”¾
2. åŒæ—¶æŒ‰ç©ºæ ¼+é¼ æ ‡å·¦é”®, æ‹–åŠ¨ç”»å¸ƒ
3. æœ‰äº›éœ€è¦è‡ªå·±å®šä¹‰ç›‘å¬ç§»åŠ¨å’Œç¼©æ”¾ï¼Œä¸æƒ³æŒ‰ç©ºæ ¼ç§»åŠ¨, æˆ–è€…ä¸æƒ³Ctrl+weel ç§»åŠ¨, é‚£ä¹ˆå¯ä»¥è®¾ç½®selfHandleä¸ºtrueï¼Œç„¶åé€šè¿‡refè·å–åˆ°ç»„ä»¶å®ä¾‹ï¼Œç„¶åé€šè¿‡å®ä¾‹è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•, è‡ªå®šä¹‰ç›‘å¬æŒ‰é”®
4. å…·ä½“æ“ä½œå‚è§æˆ‘æ’ä»¶é‡Œé¢çš„ç›‘å¬ç§»åŠ¨å’Œç¼©æ”¾æ–¹æ³•

```js
const panzoomInstance = sketchruleRef.panzoomInstance

document.addEventListener('wheel', function (e) {
  if (e.ctrlKey || e.metaKey) {
    panzoomInstance.zoomWithWheel(e)
  }
})

// è®©æŒ‰ä¸‹ç©ºæ ¼é”®æ‰èƒ½ç§»åŠ¨ç”»å¸ƒ
document.addEventListener('keydown', function (e) {
  if (e.key === ' ') {
    panzoomInstance.bind()
    e.preventDefault()
  }
})

document.addEventListener('keyup', function (e) {
  if (e.key === ' ') {
    panzoomInstance.destroy()
  }
})
```

### æ’æ§½æä¾›æ–¹æ³•

| äº‹ä»¶åç§° | æè¿°         | å›è°ƒå‚æ•° |
| -------- | ------------ | -------- |
| reset    | ç”»å¸ƒé‡ç½®ä½ç½® |          |
| zoomIn   | ç”»å¸ƒæ”¾å¤§     |          |
| zoomIn   | ç”»å¸ƒç¼©å°     |          |

### QQ æŠ€æœ¯äº¤æµç¾¤ï¼š

æ¬¢è¿å¤§å®¶ä¸€èµ·å‚ä¸æ’ä»¶å»ºè®¾

<a target="_blank" href="https://qm.qq.com/cgi-bin/qm/qr?k=oqnBX-qn7gkWsdfYQdvNCzYbkeNknuOc&jump_from=webapi&authKey=4YXd2jvmWYU0cN8zUky5DoCD6kz+fjUyWv782GLUjDEIHctXYviSXD/pbqxm/ZDD"><img border="0" src="https://github.com/kakajun/react-sketch-ruler/blob/main/example/assets/group.png" alt="react-sketch-ruler" title="ç‚¹å‡»è¿™é‡ŒåŠ å…¥QQç¾¤640166628"></a>

<div align=center>
<img src="https://github.com/kakajun/react-sketch-ruler/blob/main/example/assets/qq.png" width="243" height="287">
</div>

## è´¡çŒ®è€…

<a href="https://github.com/kakajun/react-sketch-ruler/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=kakajun/react-sketch-ruler" />
</a>

## æœ€å

è¿™æ˜¯ä¸ªå¼€æºä¸šä½™åšçš„åŠŸèƒ½ï¼Œæ¬¢è¿åŠ å¼ºè¯¥æ’ä»¶çš„å°ä¼™ä¼´åŠ å…¥, å¦‚æœæ’ä»¶`vue3-sketch-ruler`å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªstarï¼Œæ‚¨çš„é¼“åŠ±æ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ›ã€‚

## å¼•ç”¨

vue3æ ‡å°ºç»„ä»¶ [vue3-sketch-ruler](https://github.com/kakajun/vue3-sketch-ruler)
